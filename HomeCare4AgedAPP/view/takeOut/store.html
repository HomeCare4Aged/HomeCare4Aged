<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/common/common.css" />
		<link rel="stylesheet" href="../../css/takeOut/store.css" />
		<style>
			.mui-popover-arrow {
				display: none;
			}
			
			#middlePopover {
				position: fixed;
				top: 20% !important;
				left: 10%!important;
				height: 60%;
			}
			
			#bottomPopover {
				/*position: fixed;
				top: 15% !important;*/
				bottom: 10%!important;
				height: 40%;
			}
			/*.aaaaaa:before {
			  content: '';
			  display: inline-block;
			  height: 100%;
			  vertical-align: middle;
			  margin-right: -0.25em; /* Adjusts for spacing */
			/*}*/
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav m_orange2">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">店铺详情</h1>
		</header>
		<div class="mui-content" style="margin-top: 15px;margin-bottom: 18%;">

			<img src="../../images/home/cloudySky.png" class="mui-icon-image blur" id="backgroundImg" style="position: absolute; height: 50%;" />
			<div class="BG" style="background: rgba(0,0,0,0.4);position: relative;" id="BGBlack">
				<img src="" id="zz-img-head" />
				<div class="mui-row zz-1 mui-col-xs-12">
					<img class="mui-col-xs-2" src="../../images/takeOut/address.png" id="addressImg" />
					<span class="mui-col-xs-10" id="span-address"></span>
				</div>
				<div class="mui-row zz-2 mui-col-xs-12">
					<img class="mui-col-xs-2" src="../../images/takeOut/freight.png" id="freightImg" />
					<span class="mui-col-xs-10" id="span-freight"></span>
				</div>
				<div class="mui-row zz-3 mui-col-xs-12">
					<img class="mui-col-xs-2" src="../../images/takeOut/distance.png" id="distanceImg" />
					<span class="mui-col-xs-10" id="span-distance"></span>
				</div>
				<div class="mui-row zz-4" id="storeName">

				</div>
			</div>

			<ul class="mui-table-view mui-table-view-chevron" id="list_already">
				<!--<li class="mui-table-view-cell mui-collapse">
					<a class="mui-navigate-right" href="#">产品</a>

					<ul class="mui-table-view mui-table-view-chevron">

						<li class="mui-table-view-cell " style="padding: 0px;">
							<div>

								<div style="width: 15%;margin-left: 6%;float: left;">
									<img src="../../images/takeOut/pull.png" class="mui-media-object" />
								</div>
								<a href="#middlePopover" style="color: black;">
									<div style="width: 48%;float: left;margin-left: 5px;">
										<h4 style="margin-bottom: 1em;">黄焖鸡黄焖鸡小份</h4>
										<h4 class="gray-text">
										月售2000份&nbsp;
										<span style="color: red;">￥25元</span>
									</h4>
									</div>
								</a>

								<div style="height: 300%;  width: 28%;margin-top: 1em;float: right;">
									<div style="width: 30%;float: left;">
										<img src="../../images/takeOut/reduce.png" style="width: 100%;position: relative;margin-right: 0.2em;display: none;" />
									</div>
									<div style="width: 30%;float: left;text-align: center;margin-top: 0.35em;">
										<span style="display: none;">x11</span>
									</div>
									<div style="width: 30%;float: left;">
										<img src="../../images/takeOut/add.png" style="width: 100%;position: relative;margin-right: 0.2em;" />
									</div>
								</div>

							</div>
						</li>

						<li class="mui-table-view-cell " style="padding: 0px;">
							<div style="background-color: red;width: 100%;height: 100%;">

								<div style="width: 15%;margin-left: 6%;float: left;">
									<img src="../../images/takeOut/pull.png" class="mui-media-object" />
								</div>

								<a href="#middlePopover" style="color: black;">
									<div style="width: 48%;float: left;margin-left: 5px;">
										<h4 style="margin-bottom: 1em;">黄焖鸡黄焖鸡小份</h4>
										<h4 class="gray-text">
										月售2000份&nbsp;
										<span style="color: red;">￥25元</span>
									</h4>
									</div>
								</a>

								<div style="height: 300%;  width: 28%;margin-top: 1em;float: right;">
									<div style="width: 30%;float: left;">
										<img src="../../images/takeOut/reduce.png" style="width: 100%;position: relative;margin-right: 0.2em;display: none;" />
									</div>
									<div style="width: 30%;float: left;text-align: center;margin-top: 0.35em;">
										<span style="display: none;">x11</span>
									</div>
									<div style="width: 30%;float: left;">
										<img src="../../images/takeOut/add.png" style="width: 100%;position: relative;margin-right: 0.2em;" />
									</div>
								</div>

							</div>
						</li>

					</ul>
				</li>-->
			</ul>

			<!--<ul class="mui-table-view mui-table-view-chevron" id="list_already">
				<li class="mui-table-view-cell mui-collapse">
					<a class="mui-navigate-right">
						黄焖类
						<img src="../../images/takeOut/pull.png" style=" width: 30px; float: right; margin-right: -40px; margin-top: 10px;" />
					</a>
					<ul class="mui-table-view mui-table-view-chevron">
						<li class="mui-table-view-cell"style="padding:10px 25px;">
								<!--<div class="mui-row mui-col-xs-12">
								<div class="mui-col-xs-1">
									<img src="../../images/takeOut/pull.png" style=" width: 50px;background-color: burlywood;" />
								</div>
								<div class="mui-col-xs-7" style="margin-left: 40px; margin-top: -5px; background-color: #E5E5E4;">
									<h4>黄焖鸡h黄焖鸡小份</h4>
									<h4 style="margin-top: 15px;" class="gray-text">
										月售2000份&nbsp;
										<span style="color: red;">￥25元</span>
									</h4>
								</div>
								<div class="mui-col-xs-2" style="float: right;background-color: #6641E2;">
									<span style="float: left;">x1</span>
									<img src="../../images/takeOut/add.png" style="width: 20px;float: right;" />
									<img src="../../images/takeOut/reduce.png" style="width: 20px;margin-top: 15px; float: right; margin-left: 80px;" />
								</div>
							</div>-->
			<!--ss
							
							</li>
					</ul>-->
			<!--<ul class="mui-table-view mui-table-view-chevron">
						<li class="mui-table-view-cell" style="padding:10px 25px;">
							<div class="mui-row mui-col-xs-12">
								<div class="mui-col-xs-1">
									<img src="../../images/takeOut/pull.png" style=" width: 50px;" />
								</div>
								<div class="mui-col-xs-7" style="margin-left: 40px; margin-top: -5px;">
									<h4>黄焖鸡h黄焖鸡小份</h4>
									<h4 style="margin-top: 15px;" class="gray-text">
										月售2000份&nbsp;
										<span style="color: red;">￥25元</span>
									</h4>
								</div>
								<div class="mui-col-xs-2" style="float: right;width: 50px;">
									<span style="float: left;">x1</span>
									<img src="../../images/takeOut/add.png" style="width: 20px;float: right;" />
									<img src="../../images/takeOut/reduce.png" style="width: 20px;margin-top: 15px; float: right; margin-left: 80px;" />
								</div>
							</div>
						</li>
					</ul>-->
			<!--</li>
			</ul>-->

			<div id="middlePopover" class="mui-popover">

				<div class="mui-scroll-wrapper" id="wrapper" style="margin-top: -0.1px;">
					<div class="mui-scroll">
						<img src="../../images/123.png" style="width: 100%;height: 300px;" id="zz-img-popoverImgShow" class="middlePopoverImg" />
						<h4 id="zz-h4-popoverName" style="margin-left: 15px;margin-right: 15px;">超级无敌黄焖鸡小份</h4>
						<div class="mui-row mui-col-xs-12">
							<div class="mui-col-xs-7" style="margin-left: 15px;margin-right: 15px;">
								<h4 style="" class="gray-text" id="zz-h4-popoverSale">
									月售2000份&nbsp;
									<span style="color: red;" id="zz-span-popoverMoney">￥25元</span>
								</h4>
							</div>
							<div class="mui-col-xs-1" style="float: right;margin-right: 20px;">
								<img src="../../images/takeOut/add.png" style="width: 25px;" id="zz-img-popoverAdd" class="g-btnActive" />
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="bottomPopover" class=" mui-popover mui-popover-action mui-popover-bottom" style="background-color: white;">
				<!--<img src="../../images/small.png" style="width: 100%;height: 100%;no-repeat" id="imgTips" />-->
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll" id="bottomPopoverScroll">
						<!--<div class="mui-row">
							<div class="mui-col-xs-7" style="">
								<div class="" style="margin-left: 4%;">
									<h4>黄焖鸡小份</h4>
									<h4 style="color: red;margin-top: 5%;">￥20</h4>
								</div>
							</div>
							<div class="mui-col-xs-5" style="margin-top: 3%;">
								<img src="../../images/takeOut/reduce.png" style="width: 20%;margin-right:4%;margin-left: 20%;margin-bottom: 0px;" />
								<span style="font-size: 130%;line-height: 20px;position: absolute;margin-top: 4%;">x10</span>
								<img src="../../images/takeOut/add.png" style="width: 20%;float: right;margin-right: 8%;" />
							</div>
						</div>
						<div  style="background-color: #E7E7E7;height: 1px;width: 94%;margin-left: 3%;margin-right: 30px;"></div> -->
					</div>

				</div>
			</div>

			<div class="mui-col-xs-12" style="height: 10%;position: fixed;bottom: 0px; background:red;">
				<div style="height: 10%;position: fixed;bottom: 0px; background: rgb(51,51,51);" class="mui-col-xs-7">
					<a href="#bottomPopover" id="a-bottomPopover">
						<img src="../../images/takeOut/box1.png" style="width: 53px;margin-left: 15px;margin-top: 3%;" id="zz-img-box" />
					</a>

					<span style="color: black;margin-left: -10px; position: fixed; background-color: white; display: none;" class="mui-badge mui-badge-primary" id="zz-span-count">1</span>
					<span style="color: white;bottom: 3%;left: 22%; position: fixed;font-size: 19px;font-weight: bold;display: none;" id="zz-span-commodityMoneyAll"></span>
				</div>
				<div style=" height: 100%; background: rgb(51,51,51); float: right;" class="mui-col-xs-5" id="zz-div-statrtPrice">
					<h4 style="color: white;text-align: center;margin-top: 16%;" id="zz-h4-statrtPrice"></h4>
				</div>
			</div>

		</div>

		<script type="text/javascript" src="../../js/jquery.1.11.1.js"></script>
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/constants.js"></script>
		<script type="text/javascript">
			mui.init();
			mui('.mui-scroll-wrapper').scroll();
			$('.BG').css('width', document.documentElement.clientWidth);
			//			$('.BG').css('height', document.documentElement.clientHeight / 1.8);
			$('.mui-icon-image').css('width', document.documentElement.clientWidth);
			//			document.getElementById('wrapper').style.marginTop = document.getElementById('zz-img-popoverImgShow').offsetHeight+'px';
			//			$('.mui-icon-image').css('height', document.documentElement.clientHeight / 1.8);
			mui.plusReady(function() {

				localStorage.commodityMoneyAll = 0;
				//				var is_open = '0';
				localStorage.is_chanceFood = '0';

				mui.back = function() {
					if(localStorage.is_chanceFood == '1') {
						var btnArray = ['返回', '留下', ];
						mui.confirm('如果返回您刚才所选的物品将被清空！', '', btnArray, function(e) {
							if(e.index == 0) {
								mui.currentWebview.close();
							} else if(e.index == 1) {}

						});
					}
					if(localStorage.is_chanceFood == '0') {
						mui.currentWebview.close();
					}
				}

				//				var is_CommodityOn = 0;
				var priceDifferences; //差价
				var doc = document;
				var dataInfo = {};
				var sData = plus.webview.currentWebview();
				localStorage.statrtPrice = sData.store_up_to_send_price;
				console.log(localStorage.statrtPrice);
				doc.getElementById('backgroundImg').setAttribute('src', sData.store_shop_picture);
				doc.getElementById('zz-img-head').setAttribute('src', sData.store_shop_picture);
				doc.getElementById('span-address').innerHTML = sData.store_shop_address;
				doc.getElementById('span-freight').innerHTML = "基础运费：" + sData.store_carriage + "元";
				if(parseInt(sData.distance) < 1) {
					doc.getElementById('span-distance').innerHTML = "距离：" + sData.distance * 1000 + "米";
				} else {
					doc.getElementById('span-distance').innerHTML = "距离：" + sData.distance.toFixed(1) + "千米";
				}
				doc.getElementById('storeName').innerHTML = sData.store_shop_name;

				fragment = doc.createDocumentFragment();
				container_already = doc.getElementById("list_already");
				zz_img_box = doc.getElementById('zz-img-box');
				zz_h4_statrtPrice = doc.getElementById('zz-h4-statrtPrice'); //起送价
				zz_h4_statrtPrice.innerHTML = sData.store_up_to_send_price + "元起送";
				zz_span_count = doc.getElementById('zz-span-count');
				zz_span_commodityMoneyAll = doc.getElementById('zz-span-commodityMoneyAll'); //商品总价
				zz_div_statrtPrice = doc.getElementById('zz-div-statrtPrice');
				zz_img_popoverImgShow = doc.getElementById('zz-img-popoverImgShow');
				zz_h4_popoverName = doc.getElementById('zz-h4-popoverName');
				zz_h4_popoverSale = doc.getElementById('zz-h4-popoverSale');
				zz_span_popoverMoney = doc.getElementById('zz-span-popoverMoney');
				zz_img_popoverAdd = doc.getElementById('zz-img-popoverAdd');

				zz_img_popoverAdd.addEventListener("tap", function() {
					console.log('点击蒙版图上的添加菜品');
					console.log(this.id);
					add(this.id);
				});

				var matchData;
				var store_carriage;
				var storeName;
				postData = {};
				postData['store_shop_id'] = sData.store_shop_id;
				plus.nativeUI.showWaiting();
				mui.ajax({
					type: 'POST',
					url: SERVERURL + "SStoreGoodsInfo/getStoreGoodsInfo",
					data: postData,
					dataType: "json",
					timeout: 20000,
					//成功获取数据赋值
					success: function(data) {
						plus.nativeUI.closeWaiting();
						console.log('aaaaaa' + JSON.stringify(data));
						console.log(JSON.stringify(data.classify));
						console.log(JSON.stringify(data.matchData));
						matchData = data.matchData;
						store_carriage =
							console.log("+++++++++++++++++++++++" + JSON.stringify(matchData));
						dataInfo = data.idPrice;
						mui.each(data.classify, function(i) {

							var name = data.classify[i]['type'];
							liHeader = doc.createElement("li");
							liHeader.setAttribute("class", "mui-table-view-cell mui-collapse");
							liHeader.id = data[i];

							a = doc.createElement("a");
							a.setAttribute("class", "mui-navigate-right");
							//							a.setAttribute('style','font-size: 20px;')
							a.innerHTML = data.classify[i]['type'];
							imgPull = doc.createElement("img");
							imgPull.setAttribute("src", "../../images/takeOut/pull.png");
							imgPull.setAttribute("style", "width: 30px; float: right; margin-right: -40px; margin-top: 10px;");
							liHeader.appendChild(a);
							a.appendChild(imgPull);
							fragment.appendChild(liHeader);
							//							a.addEventListener('tap', function() {
							//								console.log("点击分类标签");
							//								if(is_open == "0") {
							//									imgPull.setAttribute("src", "../../images/takeOut/pullup.png");
							//									is_open = "1";
							//								} else {
							//									imgPull.setAttribute("src", "../../images/takeOut/pull.png");
							//									is_open = "0";
							//								}
							//							});
							mui.each(data.data[data.classify[i]['type']], function(i) {

								ul = doc.createElement("ul");
								ul.setAttribute("class", "mui-table-view mui-table-view-chevron");

								liContent = doc.createElement("li");
								liContent.setAttribute("class", "mui-table-view-cell");
								liContent.setAttribute("style", "padding:0px;line-height: 100%;");
								liContent.id = data.data[name][i]['store_goods_id'] + 'liContent';
								liContent.setAttribute("selfSrc", data.data[name][i]['store_goods_picture']);

								divContent = doc.createElement("div");
								//																divContent.setAttribute("style", "border:1px solid red;");
								divLine = document.createElement('div');
								divLine.setAttribute("style", "background-color: #E7E7E7;height: 1px;margin-left: 25px;margin-right: 25px;");

								divImg = doc.createElement("div");
								//								divImg.setAttribute("class", "mui-col-xs-2");
								divImg.setAttribute("style", "width: 15%;margin-left: 6%;float: left;margin-top: 0.2em;");

								aImg = doc.createElement("a");
								aImg.setAttribute("href", "#middlePopover");
								aImg.id = data.data[name][i]['store_goods_id'] + 'aImg';
								aImg.setAttribute("selfSrc", data.data[name][i]['store_goods_picture']);

								imgShow = doc.createElement("img");
								imgShow.setAttribute("src", data.data[name][i]['store_goods_picture']);
								imgShow.setAttribute("class", "mui-media-object");

								aLi = doc.createElement("a");
								aLi.setAttribute("href", "#middlePopover");
								aLi.setAttribute("style", "color: black;");
								aLi.id = data.data[name][i]['store_goods_id'] + 'aLi';
								aLi.setAttribute("selfSrc", data.data[name][i]['store_goods_picture']);
								divDescribe = doc.createElement("div");
								//								divDescribe.setAttribute("class", "mui-col-xs-9");
								divDescribe.setAttribute("style", "width: 48%;float: left;margin-left: 5px;");

								h4Name = doc.createElement("h4");
								h4Name.innerHTML = data.data[name][i]['store_goods_name'];
								h4Name.id = data.data[name][i]['store_goods_id'] + 'foodName';
								h4Name.setAttribute("style", "margin-bottom: 0.5em;");
								//								h4Name.setAttribute('attr',data.data[name][i]['store_goods_name']);
								//								console.log(h4Name.innerHTML);
								h4Sale = doc.createElement("h4");
								h4Sale.setAttribute("class", "gray-text");
								//								h4Sale.setAttribute("style", "margin-top: 15px;");
								h4Sale.id = data.data[name][i]['store_goods_id'] + 'foodSale';
								h4Sale.innerHTML = "月售" + data.data[name][i]['store_monthly_sales'] + "份  ";
								spanMoney = doc.createElement("span");
								spanMoney.setAttribute("style", "color: red;");
								spanMoney.setAttribute("attr", data.data[name][i]['store_goods_price']);
								spanMoney.innerHTML = "￥" + data.data[name][i]['store_goods_price'] + "元";

								divAddOrReduce = doc.createElement("div");
								//								divAddOrReduce.setAttribute("class", "mui-col-xs-2");
								divAddOrReduce.setAttribute("style", "width: 28%;margin-top: 0.5em;float: right;");
								divSpanCount = doc.createElement("div");
								divSpanCount.setAttribute("style", "width: 30%;float: left;text-align: center;margin-top: 0.35em;");
								spanCopies = doc.createElement("span");
								//								spanCopies.setAttribute("style", "float: left;");
								//								spanCopies.innerHTML = 'x1';

								spanCopies.id = data.data[name][i]['store_goods_id'] + 'span';
								spanCopies.setAttribute("count", "0");
								spanCopies.setAttribute("price", data.data[name][i]['store_goods_price']);
								divImgAdd = doc.createElement("div");
								divImgAdd.setAttribute("style", "width: 30%;float: left;");
								imgAdd = doc.createElement("img");
								imgAdd.setAttribute("src", "../../images/takeOut/add.png");
								imgAdd.setAttribute("style", "width: 100%;position: relative;margin-right: 0.2em; ");
								imgAdd.setAttribute("class", "g-btnActive");
								imgAdd.setAttribute("attr", data.data[name][i]['store_goods_id']);
								imgAdd.id = data.data[name][i]['store_goods_id'] + 'add';
								divImgReduce = doc.createElement("div");
								divImgReduce.setAttribute("style", "width: 30%;float: left;");
								imgReduce = doc.createElement("img");
								imgReduce.setAttribute("src", "../../images/takeOut/reduce.png");
								imgReduce.setAttribute("style", "width: 100%;position: relative;margin-right: 0.2em;display: none;");
								imgReduce.setAttribute("class", "g-btnActive");
								imgReduce.id = data.data[name][i]['store_goods_id'] + 'reduce';
								imgReduce.setAttribute("count", "0");

								aLi.addEventListener("tap", function() {
									var id = this.id.replace('aLi', "");
									console.log('点击展示图');
									console.log(aImg.id);
									zz_h4_popoverName.innerHTML = document.getElementById(id + 'foodName').innerHTML;
									console.log(h4Name.id);
									zz_h4_popoverSale.innerHTML = document.getElementById(id + 'foodSale').innerHTML;;
									zz_span_popoverMoney = spanMoney.innerHTML;
									zz_img_popoverImgShow.src = this.getAttribute("selfSrc");
									zz_img_popoverAdd.id = id + 'add';
									console.log(zz_img_popoverAdd.id);
									console.log("nnnnnnnnnnnnnnnnnnn" + document.getElementById('middlePopover').offsetHeight);
								});

								imgAdd.addEventListener("tap", function() {
									console.log('点击添加菜品');
									add(this.id);
								});

								imgReduce.addEventListener("tap", function() {
									console.log('点击减少菜品');
									reduce(this.id);
								});

								//								liHeader.appendChild(a);
								//								a.appendChild(imgPull);
								liHeader.appendChild(ul);
								ul.appendChild(liContent);
								//								aLi.appendChild(liContent);
								liContent.appendChild(divContent);
								//								liContent.appendChild(divLine);
								divContent.appendChild(divImg);
								divImg.appendChild(imgShow);
								//								aImg.appendChild(imgShow);
								divContent.appendChild(aLi);
								aLi.appendChild(divDescribe);
								divDescribe.appendChild(h4Name);

								divDescribe.appendChild(h4Sale);
								h4Sale.appendChild(spanMoney);

								divContent.appendChild(divAddOrReduce);
								divAddOrReduce.appendChild(divImgReduce);
								divImgReduce.appendChild(imgReduce);
								divAddOrReduce.appendChild(divSpanCount);
								divSpanCount.appendChild(spanCopies);
								divAddOrReduce.appendChild(divImgAdd);
								divImgAdd.appendChild(imgAdd);

								//								fragment.appendChild(liHeader);

							});

						});
						container_already.appendChild(fragment);
					},
					error: function(xhr, type, errorThrown) {
						plus.nativeUI.closeWaiting();
						console.log(type);
						mui.toast('网络连接失败');
					}

				});
				var storeCount = 0;
				var storeFoodData = {};
				var storeFoodALLData = [];
				localStorage.commodityMoneyAll = 0;
				localStorage.storeFoodData = storeFoodData;

				document.getElementById('a-bottomPopover').addEventListener('tap', function() {

					if(storeCount == 0) {
//						document.getElementById('imgTips').style.display = 'none';
						mui.toast('您的购物车为空~');
					}
//					else {
////						document.getElementById('imgTips').style.display = '';
//					}
					var fragment2 = document.createDocumentFragment();
					//					var fragment3 = document.createDocumentFragment();

					var bottomPopover = document.getElementById("bottomPopoverScroll");
					var childs = bottomPopover.childNodes;
					for(var i = childs.length - 1; i >= 0; i--) {
						bottomPopover.removeChild(childs[i]);
					}
					console.log(JSON.stringify(matchData));
					console.log(JSON.stringify(storeFoodData))
					for(var p in storeFoodData) {
						if(storeFoodData[p] == '0') {
							delete storeFoodData[p];
							continue;
						} else {
							divContent = document.createElement('div');
							divContent.setAttribute('class', "mui-row");
							divContent.id = matchData[p]['id'] + 'divContent';
							divCOL7 = document.createElement('div');
							divCOL7.setAttribute('class', "mui-col-xs-7");
							divText = document.createElement('div');
							divText.setAttribute('style', "margin-left: 4%;");
							h4BottomPopoverStoreName = document.createElement('h4');
							h4BottomPopoverStoreName.innerHTML = matchData[p]['name'];
							h4BottomPopoverStorePrice = document.createElement('h4');
							h4BottomPopoverStorePrice.setAttribute('style', "color: red;margin-top: 5%;");
							h4BottomPopoverStorePrice.innerHTML = "￥" + matchData[p]['price'];
							divCOL5 = document.createElement('div');
							divCOL5.setAttribute('class', "mui-col-xs-5");
							divCOL5.setAttribute('style', "margin-top: 4%;");
							imgBottomPopoverReduce = document.createElement('img');
							imgBottomPopoverReduce.setAttribute("src", "../../images/takeOut/reduce.png");
							imgBottomPopoverReduce.setAttribute("style", "width: 20%;float: right;margin-right: 8%;");
							imgBottomPopoverReduce.id = matchData[p]['id'] + 'reduce';
							imgBottomPopoverAdd = document.createElement('img');
							imgBottomPopoverAdd.setAttribute("src", "../../images/takeOut/add.png");
							imgBottomPopoverAdd.setAttribute("style", "width: 20%;float: right;margin-right: 7%;");
							imgBottomPopoverAdd.id = matchData[p]['id'] + 'add';
							spanBottomPopoverCount = document.createElement('span');
							spanBottomPopoverCount.setAttribute("style", "font-size: 130%;margin-top: 4%;float: right;margin-right: 7%;");
							spanBottomPopoverCount.id = matchData[p]['id'] + 'spanBottomPopoverCount';
							spanBottomPopoverCount.innerHTML = '×' + storeFoodData[p];

							divLine = document.createElement('div');
							divLine.setAttribute("style", "background-color: #E7E7E7;height: 1px;width: 94%;margin-left: 3%;margin-right: 30px;");
							divLine.id = matchData[p]['id'] + 'divLine';

							divContent.appendChild(divCOL7);
							divCOL7.appendChild(divText);
							divText.appendChild(h4BottomPopoverStoreName);
							divText.appendChild(h4BottomPopoverStorePrice);
							divContent.appendChild(divCOL5);
							divCOL5.appendChild(imgBottomPopoverAdd);
							divCOL5.appendChild(spanBottomPopoverCount);
							divCOL5.appendChild(imgBottomPopoverReduce);

							imgBottomPopoverAdd.addEventListener("tap", function() {
								//								console.log(localStorage.commodityMoneyAll);
								var id = this.id.replace('add', '');
								//									spanBottomPopoverCount.id ="×" + (parseInt(spanBottomPopoverCount.innerHTML.replace("×",'')) + 1);
								document.getElementById(id + 'spanBottomPopoverCount').innerHTML = "×" + (parseInt(document.getElementById(id + 'spanBottomPopoverCount').innerHTML.replace("×", '')) + 1);
								add(this.id);
							});

							imgBottomPopoverReduce.addEventListener("tap", function() {
								//console.log(localStorage.commodityMoneyAll);
								var id = this.id.replace('reduce', '');
								console.log(document.getElementById(id + 'divLine').id);
								document.getElementById(id + 'spanBottomPopoverCount').innerHTML = "×" + (parseInt(document.getElementById(id + 'spanBottomPopoverCount').innerHTML.replace("×", '')) - 1);
								if(document.getElementById(id + 'spanBottomPopoverCount').innerHTML == "×0") {
									document.getElementById(id + 'divContent').innerHTML = '';
									document.getElementById(id + 'divLine').setAttribute('style', 'background-color: white;');
								}

								reduce(this.id);
								if(localStorage.commodityMoneyAll == '0') {
									console.log('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa');
									document.getElementById('imgTips').style.display = '';
								}
							});
							fragment2.appendChild(divContent);
							fragment2.appendChild(divLine);

						}
					}
					//					fragment3.appendChild(divTips);

					document.getElementById('bottomPopoverScroll').appendChild(fragment2);
					//					document.getElementById('bottomPopover').appendChild(fragment3);
				});

				function reduce(id) {

					console.log(id);
					var id = id.replace('reduce', "");
					var count = String(parseInt(document.getElementById(id + 'span').getAttribute('count')) - 1);
					console.log(count);
					storeCount--;
					console.log()
					document.getElementById('zz-span-count').innerHTML = storeCount;
					if(storeCount < 10) {
						document.getElementById('zz-span-count').setAttribute('style', 'color: black;margin-left: -10px; position: fixed; background-color: white;');
					}
					document.getElementById(id + 'span').setAttribute('count', count);

					localStorage.commodityMoneyAll = parseFloat(localStorage.commodityMoneyAll) - parseFloat(document.getElementById(id + 'span').getAttribute('price'));
					document.getElementById('zz-span-commodityMoneyAll').innerHTML = localStorage.commodityMoneyAll + '元';

					storeFoodData[id] = count;
					storeFoodALLData.push(storeFoodData);
					//					console.log('----------------------' + JSON.stringify(storeFoodData));
					if(localStorage.commodityMoneyAll == 0) {
						document.getElementById('zz-span-commodityMoneyAll').style.display = 'none';
					}
					console.log(localStorage.commodityMoneyAll + 'nnnnnnnnnnnnnnnnnnnn');
					if(parseFloat(localStorage.commodityMoneyAll) < parseFloat(localStorage.statrtPrice) && parseFloat(localStorage.commodityMoneyAll) != 0) {

						priceDifferences = localStorage.statrtPrice - localStorage.commodityMoneyAll;
						//						zz_span_count.style.display = 'none';
						zz_div_statrtPrice.setAttribute("style", "height: 100%; background: rgb(17,17,17); float: right;");
						zz_h4_statrtPrice.innerHTML = "还差" + priceDifferences + "元";
					} else if(localStorage.commodityMoneyAll == 0) {
						localStorage.is_chanceFood = '0';
						zz_img_box.setAttribute("src", "../../images/takeOut/box1.png");
						zz_img_box.setAttribute("style", "width: 53px;margin-left: 15px;margin-top: 3%;");
						zz_div_statrtPrice.setAttribute("style", "height: 100%; background: rgb(51,51,51); float: right;");
						zz_h4_statrtPrice.innerHTML = localStorage.statrtPrice + "元起送";
					}

					if(storeCount == 0) {
						zz_img_box.setAttribute("src", "../../images/takeOut/box1.png");
						zz_img_box.setAttribute("style", "width: 53px;margin-left: 15px;margin-top: 3%;");
						document.getElementById('zz-span-count').style.display = 'none';
					}
					if(parseInt(document.getElementById(id + 'span').getAttribute('count')) > 0) {
						console.log(id);
						document.getElementById(id + 'reduce').style.display = '';
						document.getElementById(id + 'span').innerHTML = '×' + document.getElementById(id + 'span').getAttribute('count');
					} else {
						document.getElementById(id + 'reduce').style.display = 'none';
						document.getElementById(id + 'span').innerHTML = '';
					}

					console.log('----------------------------' + JSON.stringify(matchData));
					//					document.getElementById('bottomPopoverStoreName').innerHTML = matchData[storeName].name;
					//					console.log(storeName);
				}

				//添加菜品
				function add(id) {
					localStorage.is_chanceFood = '1';
					//					console.log(is_chanceFood);
					spanCopies.style.display = '';

					var id = id.replace('add', "");
					console.log(id);
					storeCount++;
					zz_img_box.setAttribute("src", "../../images/takeOut/box2.png");
					zz_img_box.setAttribute("style", "width: 53px;margin-left: 15px;margin-top: 3%;");
					document.getElementById('zz-span-count').style.display = '';
					document.getElementById('zz-span-count').innerHTML = storeCount;
					if(storeCount > 9) {
						document.getElementById('zz-span-count').setAttribute('style', 'color: black;margin-left: -15px; position: fixed; background-color: white;');
					}
					var count = String(parseInt(document.getElementById(id + 'span').getAttribute('count')) + 1);

					console.log('===========' + document.getElementById(id + 'span').getAttribute('count'));

					localStorage.commodityMoneyAll = parseFloat(localStorage.commodityMoneyAll) + parseFloat(document.getElementById(id + 'span').getAttribute('price'));
					document.getElementById('zz-span-commodityMoneyAll').innerHTML = localStorage.commodityMoneyAll + '元';
					console.log(localStorage.commodityMoneyAll);

					console.log('count' + count);
					localStorage.storeFoodData[id] = count;

					document.getElementById('zz-span-commodityMoneyAll').style.display = '';
					storeFoodData[id] = count;
					//					storeFoodALLData.push(storeFoodData);
					console.log('----------------------' + JSON.stringify(storeFoodData));
					if(localStorage.commodityMoneyAll >= localStorage.statrtPrice) {
						zz_div_statrtPrice.setAttribute("style", "height: 100%; background: rgb(255,105,44); float: right;");
						zz_h4_statrtPrice.innerHTML = "结算";
						zz_span_count.style.display = '';
					} else {
						console.log('conme');
						priceDifferences = localStorage.statrtPrice - localStorage.commodityMoneyAll;
						if(priceDifferences > 0) {
							zz_div_statrtPrice.setAttribute("style", "height: 100%; background: rgb(17,17,17); float: right;");
							zz_h4_statrtPrice.innerHTML = "还差" + priceDifferences + "元";
						}
						console.log('差价' + priceDifferences);
					}
					console.log(count);

					document.getElementById(id + 'span').setAttribute('count', count);
					if(parseInt(document.getElementById(id + 'span').getAttribute('count')) > 0) {
						console.log(id);
						document.getElementById(id + 'reduce').style.display = '';
						document.getElementById(id + 'span').innerHTML = '×' + document.getElementById(id + 'span').getAttribute('count');
					} else {
						document.getElementById(id + 'reduce').style.display = 'none';
						document.getElementById(id + '').innerHTML = '';
					}

					console.log('+++++++++++++++++++++++++' + JSON.stringify(matchData));
				}

				zz_div_statrtPrice.addEventListener('tap', function() {
					console.log(zz_h4_statrtPrice.innerHTML);
					var storeName = document.getElementById('storeName').innerHTML;
					//					var freight = document.getElementById('span-freight').innerHTML.substr(5);
					console.log(storeName);
					if(zz_h4_statrtPrice.innerHTML == '结算') {
						console.log('----------storeFoodData------------' + JSON.stringify(storeFoodData));
						console.log('---------matchData-------------' + JSON.stringify(matchData));
						localStorage.storeFoodData = JSON.stringify(storeFoodData);
						localStorage.matchData = JSON.stringify(matchData);
						console.log('----------shopData------------' + JSON.stringify(localStorage.shopData))
						mui.openWindow({
							url: '../takeOut/orderForm.html',
							extras: {
								"matchData": matchData,
								"storeFoodData": storeFoodData,
								"storeName": storeName,
								"freight": sData.store_carriage,
							},
						});
					} else {
						return;
					}

				});
			});
		</script>
	</body>

</html>