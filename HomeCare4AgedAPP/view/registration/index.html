<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/common/common.css" />
		<link rel="stylesheet" href="../../css/registration/index.css" />

	</head>

	<body>
		<header class="mui-bar mui-bar-nav m_orange">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">挂号</h1>

			<div id="myHistory" class="mui-bar top60px " style="height: 70px;">
				<h5 class="black-text" style="font-weight: bold; font-size: 30px; margin-top: 20px; margin-left: 15px;">我的挂号历史</h5>
				<h5 class="black-text" style="font-weight: bold; font-size: 30px;float: right;margin-top: -37px;margin-right: 10px;">></h5>
			</div>
			<div class="mui-bar top110px " style="height: 70px;">
				<h5 class="m_gray_text" style="font-size: 30px; margin-top: 20px; font-weight: normal; margin-left: 15px;">选择科室</h5>
			</div>
		</header>
		<div class="mui-content top95px">
			<!--<div class="mui-row marginLeftRight" style="margin-bottom: 10px;">
				<label class="m_gray_text" style="font-size: 30px;">选择科室</label>		
			</div>-->
			<ul class="mui-table-view" id="list_ul">
				<!--<li class="mui-table-view-cell mui-media" id="list" >
					<div class="marginLeftRight">
							<img class="mui-media-object mui-pull-left" src="../../images/small.png">
							<h1 class="black-text listCellText"></h1>
					</div>
				</li>-->
			 </ul>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/constants.js"></script>
		<script type="text/javascript">
			mui.init({
				swipeBack: true //启用右滑关闭功能
			});
			//获取科室列表
			mui.plusReady(function() {
				var community_hospitals_id = '0001';
				mui.ajax({
					type: 'GET',
					url: SERVERURL + "HHospitalOfficeList/selectList?community_hospitals_id=" + community_hospitals_id,
					dataType: "json",
					//成功获取数据赋值
					success: function(data) {
						var list = document.getElementsByClassName('listCellText');
						var doc = document;

						fragment = doc.createDocumentFragment();
						container = doc.getElementById("list_ul");
						mui.each(data.data, function(i) {
							var doc = document;
							//							console.log(i);
							li = doc.createElement("li");
							div = doc.createElement("div");
							img = doc.createElement("img");
							h1 = doc.createElement("h1");
							li.setAttribute("class", "mui-table-view-cell mui-media");
							div.setAttribute("class", "marginLeftRight");
							img.setAttribute("class", "mui-media-object mui-pull-left");

							if(data.data[i].hospital_office_id == '0000') {
								img.setAttribute("src", "../../images/registration/waike.png");
							} else if(data.data[i].hospital_office_id == '0001') {
								img.setAttribute("src", "../../images/registration/neike.png");
							} else if(data.data[i].hospital_office_id == '0002') {
								img.setAttribute("src", "../../images/registration/pifu.png");
							} else if(data.data[i].hospital_office_id == '0003') {
								img.setAttribute("src", "../../images/registration/wuguan.png");
							}
							//							else if(data.data[i].hospital_office_id =='0004'){
							//								img.setAttribute("src","../../images/small.png");
							//							}
							else {
								img.setAttribute("src", "../../images/registration/define.png");
							}
							h1.setAttribute("class", "black-text")
							h1.innerHTML = data.data[i].hospital_office_name;
							li.setAttribute("name", data.data[i].hospital_office_name);
							li.id = data.data[i].hospital_office_id.toString();
							li.addEventListener('tap', function() {
								mui.openWindow({
									url: '../registration/doctorList.html',
									extras: {
										hospital_office_id: this.id,
										community_hospitals_id: community_hospitals_id,//医院内码
										hospital_office_name: this.getAttribute("name"),
									},
								});
							});
							li.appendChild(div);
							div.appendChild(img);
							div.appendChild(h1);
							fragment.appendChild(li);
						});
						container.appendChild(fragment);
					},
					error: function(xhr, type, errorThrown) {
						//						console.log(type);
						//						mui.toast(type);
					}
				});

				var btn = document.getElementById("myHistory");
				btn.addEventListener("tap", function() {
					mui.openWindow({
						url: '../registration/myHistory.html',
						extras: {
							_id: this.id,
						},
					});
				});

			});
		</script>
	</body>

</html>